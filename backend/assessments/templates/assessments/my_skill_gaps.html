{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Skill Gaps – {{ job.title }} – JobElevate{% endblock %}

{% block content %}
<style>
/* ══════════════════════════════════════════════════
   Skill Gap Analysis  (sg- namespace)
   Card-based design matching recommended_jobs / job_listings
   ══════════════════════════════════════════════════ */

/* ── Breadcrumb ── */
.sg-breadcrumb { display:flex; align-items:center; gap:.25rem; font-size:.85rem; color:var(--text-light); margin-bottom:.5rem; }
.sg-breadcrumb a { color:var(--primary-color); text-decoration:none; }
.sg-breadcrumb a:hover { text-decoration:underline; }

/* ── Page Header ── */
.sg-header { display:flex; justify-content:space-between; align-items:flex-start; flex-wrap:wrap; gap:1rem; margin-bottom:1.5rem; }
.sg-header h1 { font-size:1.4rem; font-weight:700; color:var(--heading-color); margin:0; display:flex; align-items:center; gap:.5rem; }
.sg-header h1 i { color:var(--primary-color); }
.sg-subtitle { font-size:.88rem; color:var(--text-light); margin-top:.2rem; }
.sg-header-actions { display:flex; gap:.5rem; flex-wrap:wrap; }
.sg-header-btn {
    font-size:.82rem; padding:.45rem .85rem; border-radius:8px;
    border:1px solid var(--border-color); background:var(--card-bg); color:var(--text-color);
    text-decoration:none; display:inline-flex; align-items:center; gap:.3rem; transition:all .15s;
}
.sg-header-btn:hover { border-color:var(--primary-color); color:var(--primary-color); }

/* ── Job Context Banner ── */
.sg-job-banner {
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:14px;
    padding:1.15rem 1.5rem; margin-bottom:1.25rem; display:flex; align-items:center; gap:1.15rem;
    border-left:4px solid var(--primary-color);
}
.sg-job-icon {
    width:46px; height:46px; border-radius:10px;
    background:rgba(79,70,229,.1); color:var(--primary-color);
    display:flex; align-items:center; justify-content:center; font-size:1.4rem; flex-shrink:0;
}
.sg-job-info { flex:1; min-width:0; }
.sg-job-info h3 { font-size:1rem; font-weight:600; color:var(--heading-color); margin:0 0 .15rem; }
.sg-job-info h3 a { color:inherit; text-decoration:none; }
.sg-job-info h3 a:hover { color:var(--primary-color); }
.sg-job-meta { font-size:.82rem; color:var(--text-light); display:flex; align-items:center; gap:.6rem; flex-wrap:wrap; }
.sg-job-meta span { display:flex; align-items:center; gap:.2rem; }

/* ── Match Score Ring ── */
.sg-match-ring { width:58px; height:58px; position:relative; flex-shrink:0; }
.sg-match-ring svg { width:58px; height:58px; transform:rotate(-90deg); }
.sg-match-track { fill:none; stroke:var(--border-color); stroke-width:4.5; }
.sg-match-fill  { fill:none; stroke-width:4.5; stroke-linecap:round; transition:stroke-dashoffset .6s ease; }
.sg-match-text {
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center;
    justify-content:center; line-height:1.15;
}
.sg-match-pct { font-size:.82rem; font-weight:700; color:var(--heading-color); }
.sg-match-label { font-size:.55rem; color:var(--text-light); text-transform:uppercase; letter-spacing:.3px; }
.sg-match-high .sg-match-fill { stroke:#22c55e; }
.sg-match-med  .sg-match-fill { stroke:#f59e0b; }
.sg-match-low  .sg-match-fill { stroke:#ef4444; }

/* ── Stats Grid ── */
.sg-stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:1rem; margin-bottom:1.5rem; }
.sg-stat {
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:12px;
    padding:1rem 1.15rem; display:flex; align-items:center; gap:.75rem;
    transition:transform .15s; box-shadow:0 1px 3px rgba(0,0,0,.03);
}
.sg-stat:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,.05); }
.sg-stat-icon {
    width:42px; height:42px; border-radius:10px;
    display:flex; align-items:center; justify-content:center; font-size:1.25rem; flex-shrink:0;
}
.sg-stat-icon.matched  { background:rgba(34,197,94,.12); color:#22c55e; }
.sg-stat-icon.critical { background:rgba(239,68,68,.12); color:#ef4444; }
.sg-stat-icon.high     { background:rgba(245,158,11,.12); color:#f59e0b; }
.sg-stat-icon.moderate { background:rgba(59,130,246,.12); color:#3b82f6; }
.sg-stat-icon.total    { background:rgba(79,70,229,.12); color:var(--primary-color); }
.sg-stat h4 { font-size:.68rem; text-transform:uppercase; letter-spacing:.4px; color:var(--text-light); margin:0 0 .05rem; font-weight:600; }
.sg-stat .val { font-size:1.3rem; font-weight:700; color:var(--heading-color); }

/* ── Section Card ── */
.sg-section {
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:14px;
    padding:1.5rem; margin-bottom:1.25rem; box-shadow:0 1px 3px rgba(0,0,0,.03);
}
.sg-section-header {
    display:flex; justify-content:space-between; align-items:center;
    padding-bottom:.85rem; margin-bottom:1rem; border-bottom:2px solid var(--border-color);
}
.sg-section-header h3 { font-size:1.05rem; font-weight:600; color:var(--heading-color); margin:0; display:flex; align-items:center; gap:.4rem; }
.sg-section-header.critical { border-color:#ef4444; }
.sg-section-header.critical h3 i { color:#ef4444; }
.sg-section-header.high { border-color:#f59e0b; }
.sg-section-header.high h3 i { color:#f59e0b; }
.sg-section-header.moderate { border-color:#3b82f6; }
.sg-section-header.moderate h3 i { color:#3b82f6; }
.sg-section-header.matched { border-color:#22c55e; }
.sg-section-header.matched h3 i { color:#22c55e; }

.sg-count-badge {
    padding:.2rem .6rem; border-radius:20px; font-size:.72rem; font-weight:600;
}
.sg-count-badge.critical { background:rgba(239,68,68,.1); color:#ef4444; }
.sg-count-badge.high     { background:rgba(245,158,11,.1); color:#d97706; }
.sg-count-badge.moderate { background:rgba(59,130,246,.1); color:#2563eb; }
.sg-count-badge.matched  { background:rgba(34,197,94,.1); color:#16a34a; }

/* ── Skill Gap Card ── */
.sg-gap-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(340px,1fr)); gap:1rem; }
@media(max-width:720px) { .sg-gap-grid { grid-template-columns:1fr; } }

.sg-gap-card {
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:12px;
    padding:1.15rem 1.25rem; display:flex; flex-direction:column; gap:.65rem;
    transition:all .2s;
}
.sg-gap-card:hover { border-color:var(--primary-color); box-shadow:0 4px 14px rgba(0,0,0,.05); transform:translateY(-1px); }

.sg-gap-top { display:flex; justify-content:space-between; align-items:flex-start; gap:.5rem; }
.sg-gap-top h4 { font-size:.98rem; font-weight:600; color:var(--heading-color); margin:0 0 .15rem; }
.sg-gap-category { font-size:.75rem; color:var(--text-light); display:flex; align-items:center; gap:.25rem; }
.sg-gap-priority {
    padding:.18rem .55rem; border-radius:20px; font-size:.68rem; font-weight:600;
    flex-shrink:0; white-space:nowrap;
}
.sg-gap-priority.critical { background:rgba(239,68,68,.1); color:#ef4444; }
.sg-gap-priority.high     { background:rgba(245,158,11,.1); color:#d97706; }
.sg-gap-priority.moderate { background:rgba(59,130,246,.1); color:#2563eb; }

/* Levels row */
.sg-levels { display:flex; gap:.75rem; flex-wrap:wrap; }
.sg-level-item {
    display:flex; flex-direction:column; align-items:center; gap:.1rem;
    min-width:60px;
}
.sg-level-label { font-size:.65rem; text-transform:uppercase; letter-spacing:.3px; color:var(--text-light); font-weight:600; }
.sg-level-val { font-size:1rem; font-weight:700; }
.sg-level-val.current { color:var(--primary-color); }
.sg-level-val.required { color:var(--heading-color); }
.sg-level-val.gap-val { color:#ef4444; }

/* Progress bar */
.sg-progress { position:relative; height:8px; background:var(--hover-bg,rgba(0,0,0,.06)); border-radius:6px; overflow:visible; }
.sg-progress-fill {
    height:100%; border-radius:6px; transition:width .4s ease;
}
.sg-progress-fill.high-fill   { background:linear-gradient(90deg,#22c55e,#16a34a); }
.sg-progress-fill.med-fill    { background:linear-gradient(90deg,#f59e0b,#d97706); }
.sg-progress-fill.low-fill    { background:linear-gradient(90deg,#ef4444,#dc2626); }
.sg-required-marker {
    position:absolute; top:-3px; height:14px; width:2.5px;
    background:#ef4444; border-radius:2px;
    transition:left .4s ease;
}

/* Actions */
.sg-gap-actions { display:flex; gap:.35rem; flex-wrap:wrap; margin-top:auto; }
.sg-action-btn {
    padding:.32rem .65rem; font-size:.78rem; border-radius:6px; border:none;
    cursor:pointer; font-weight:500; display:inline-flex; align-items:center; gap:.25rem;
    transition:all .15s; text-decoration:none;
}
.sg-action-btn.primary { background:var(--primary-color); color:#fff; }
.sg-action-btn.primary:hover { background:var(--primary-hover,var(--primary-color)); }
.sg-action-btn.outline {
    background:none; border:1px solid var(--border-color); color:var(--text-color);
}
.sg-action-btn.outline:hover { border-color:var(--primary-color); color:var(--primary-color); }

/* ── Matched Skills Card ── */
.sg-matched-card {
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:12px;
    padding:1rem 1.15rem; display:flex; align-items:center; gap:.85rem; transition:all .15s;
}
.sg-matched-card:hover { border-color:#22c55e; }
.sg-matched-icon {
    width:36px; height:36px; border-radius:8px; background:rgba(34,197,94,.1);
    display:flex; align-items:center; justify-content:center; color:#22c55e; font-size:1.15rem; flex-shrink:0;
}
.sg-matched-info { flex:1; }
.sg-matched-info h4 { font-size:.9rem; font-weight:600; color:var(--heading-color); margin:0 0 .1rem; }
.sg-matched-info span { font-size:.78rem; color:var(--text-light); }
.sg-matched-level { font-size:.88rem; font-weight:700; color:#22c55e; flex-shrink:0; }

/* ── Empty State ── */
.sg-empty {
    text-align:center; padding:3.5rem 2rem;
    background:var(--card-bg); border:1px solid var(--border-color); border-radius:14px;
}
.sg-empty i { font-size:3.5rem; color:#22c55e; display:block; margin-bottom:.75rem; }
.sg-empty h3 { font-size:1.1rem; color:var(--heading-color); margin:0 0 .35rem; }
.sg-empty p { color:var(--text-light); font-size:.9rem; margin:0 0 1.25rem; }

/* ── Responsive ── */
@media(max-width:768px) {
    .sg-header { flex-direction:column; }
    .sg-job-banner { flex-direction:column; text-align:center; }
    .sg-job-meta { justify-content:center; }
    .sg-stats { grid-template-columns:repeat(2,1fr); }
}
@media(max-width:480px) {
    .sg-stats { grid-template-columns:1fr; }
    .sg-gap-grid { grid-template-columns:1fr; }
}
</style>

<!-- Breadcrumb -->
<div class="sg-breadcrumb">
    <a href="{% url 'dashboard:home' %}">Home</a>
    <i class='bx bx-chevron-right'></i>
    <a href="{% url 'jobs:job_listings' %}">Jobs</a>
    <i class='bx bx-chevron-right'></i>
    <a href="{% url 'jobs:job_detail' job.id %}">{{ job.title|truncatechars:25 }}</a>
    <i class='bx bx-chevron-right'></i>
    <span>Skill Gaps</span>
</div>

<!-- Page Header -->
<div class="sg-header">
    <div>
        <h1><i class='bx bx-target-lock'></i> Skill Gap Analysis</h1>
        <p class="sg-subtitle">Skills needed to qualify for this position</p>
    </div>
    <div class="sg-header-actions">
        <a href="{% url 'jobs:job_detail' job.id %}" class="sg-header-btn">
            <i class='bx bx-arrow-back'></i> Back to Job
        </a>
        <a href="{% url 'jobs:job_listings' %}" class="sg-header-btn">
            <i class='bx bx-list-ul'></i> All Jobs
        </a>
    </div>
</div>

<!-- Job Context Banner -->
<div class="sg-job-banner">
    <div class="sg-job-icon"><i class='bx bx-briefcase'></i></div>
    <div class="sg-job-info">
        <h3><a href="{% url 'jobs:job_detail' job.id %}">{{ job.title }}</a></h3>
        <div class="sg-job-meta">
            <span><i class='bx bx-buildings'></i> {{ job.company }}</span>
            {% if job.location %}<span><i class='bx bx-map'></i> {{ job.location }}</span>{% endif %}
            {% if job.job_type %}<span><i class='bx bx-briefcase-alt-2'></i> {{ job.job_type }}</span>{% endif %}
            <span><i class='bx bx-list-check'></i> {{ total_skills_required }} skill{{ total_skills_required|pluralize }} required</span>
        </div>
    </div>
    <!-- Overall Match Score -->
    <div class="sg-match-ring {% if match_score >= 80 %}sg-match-high{% elif match_score >= 50 %}sg-match-med{% else %}sg-match-low{% endif %}">
        <svg viewBox="0 0 36 36">
            <circle class="sg-match-track" cx="18" cy="18" r="15.9"/>
            <circle class="sg-match-fill" cx="18" cy="18" r="15.9"
                stroke-dasharray="{{ match_score|floatformat:0 }}, 100"/>
        </svg>
        <div class="sg-match-text">
            <span class="sg-match-pct">{{ match_score|floatformat:0 }}%</span>
            <span class="sg-match-label">Match</span>
        </div>
    </div>
</div>

<!-- Stats Grid -->
<div class="sg-stats">
    <div class="sg-stat">
        <div class="sg-stat-icon matched"><i class='bx bx-check-circle'></i></div>
        <div><h4>Matched</h4><div class="val">{{ matched_skills|length }}</div></div>
    </div>
    <div class="sg-stat">
        <div class="sg-stat-icon critical"><i class='bx bx-error-circle'></i></div>
        <div><h4>Critical Gaps</h4><div class="val">{{ critical_gaps|length }}</div></div>
    </div>
    <div class="sg-stat">
        <div class="sg-stat-icon high"><i class='bx bx-error'></i></div>
        <div><h4>High Priority</h4><div class="val">{{ high_gaps|length }}</div></div>
    </div>
    <div class="sg-stat">
        <div class="sg-stat-icon moderate"><i class='bx bx-info-circle'></i></div>
        <div><h4>Moderate</h4><div class="val">{{ moderate_gaps|length }}</div></div>
    </div>
    <div class="sg-stat">
        <div class="sg-stat-icon total"><i class='bx bx-list-ul'></i></div>
        <div><h4>Total Required</h4><div class="val">{{ total_skills_required }}</div></div>
    </div>
</div>

<!-- ═══ Critical Gaps ═══ -->
{% if critical_gaps %}
<div class="sg-section">
    <div class="sg-section-header critical">
        <h3><i class='bx bx-error-circle'></i> Critical Gaps</h3>
        <span class="sg-count-badge critical">{{ critical_gaps|length }}</span>
    </div>
    <div class="sg-gap-grid">
        {% for gap in critical_gaps %}
        <div class="sg-gap-card">
            <div class="sg-gap-top">
                <div>
                    <h4>{{ gap.skill.name }}</h4>
                    <div class="sg-gap-category"><i class='bx bx-category'></i> {{ gap.skill.category.name }}</div>
                </div>
                <span class="sg-gap-priority critical">Critical</span>
            </div>
            <div class="sg-levels">
                <div class="sg-level-item">
                    <span class="sg-level-label">Current</span>
                    <span class="sg-level-val current">{{ gap.current_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Required</span>
                    <span class="sg-level-val required">{{ gap.required_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Gap</span>
                    <span class="sg-level-val gap-val">{{ gap.gap_value|floatformat:1 }}</span>
                </div>
            </div>
            <div class="sg-progress">
                <div class="sg-progress-fill low-fill" style="width:{% widthratio gap.current_level 10 100 %}%"></div>
                <div class="sg-required-marker" style="left:{% widthratio gap.required_level 10 100 %}%"></div>
            </div>
            <div class="sg-gap-actions">
                {% if gap.related_job %}
                <a href="{% url 'assessments:start_assessment_from_job' gap.related_job.id gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% else %}
                <a href="{% url 'assessments:start_assessment_direct' gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% endif %}
                <a href="{% url 'learning:course_catalog' %}?skill={{ gap.skill.id }}" class="sg-action-btn outline">
                    <i class='bx bx-book'></i> Find Courses
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- ═══ High Priority Gaps ═══ -->
{% if high_gaps %}
<div class="sg-section">
    <div class="sg-section-header high">
        <h3><i class='bx bx-error'></i> High Priority Gaps</h3>
        <span class="sg-count-badge high">{{ high_gaps|length }}</span>
    </div>
    <div class="sg-gap-grid">
        {% for gap in high_gaps %}
        <div class="sg-gap-card">
            <div class="sg-gap-top">
                <div>
                    <h4>{{ gap.skill.name }}</h4>
                    <div class="sg-gap-category"><i class='bx bx-category'></i> {{ gap.skill.category.name }}</div>
                </div>
                <span class="sg-gap-priority high">High</span>
            </div>
            <div class="sg-levels">
                <div class="sg-level-item">
                    <span class="sg-level-label">Current</span>
                    <span class="sg-level-val current">{{ gap.current_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Required</span>
                    <span class="sg-level-val required">{{ gap.required_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Gap</span>
                    <span class="sg-level-val gap-val">{{ gap.gap_value|floatformat:1 }}</span>
                </div>
            </div>
            <div class="sg-progress">
                <div class="sg-progress-fill med-fill" style="width:{% widthratio gap.current_level 10 100 %}%"></div>
                <div class="sg-required-marker" style="left:{% widthratio gap.required_level 10 100 %}%"></div>
            </div>
            <div class="sg-gap-actions">
                {% if gap.related_job %}
                <a href="{% url 'assessments:start_assessment_from_job' gap.related_job.id gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% else %}
                <a href="{% url 'assessments:start_assessment_direct' gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% endif %}
                <a href="{% url 'learning:course_catalog' %}?skill={{ gap.skill.id }}" class="sg-action-btn outline">
                    <i class='bx bx-book'></i> Find Courses
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- ═══ Moderate Priority Gaps ═══ -->
{% if moderate_gaps %}
<div class="sg-section">
    <div class="sg-section-header moderate">
        <h3><i class='bx bx-info-circle'></i> Moderate Priority Gaps</h3>
        <span class="sg-count-badge moderate">{{ moderate_gaps|length }}</span>
    </div>
    <div class="sg-gap-grid">
        {% for gap in moderate_gaps %}
        <div class="sg-gap-card">
            <div class="sg-gap-top">
                <div>
                    <h4>{{ gap.skill.name }}</h4>
                    <div class="sg-gap-category"><i class='bx bx-category'></i> {{ gap.skill.category.name }}</div>
                </div>
                <span class="sg-gap-priority moderate">Moderate</span>
            </div>
            <div class="sg-levels">
                <div class="sg-level-item">
                    <span class="sg-level-label">Current</span>
                    <span class="sg-level-val current">{{ gap.current_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Required</span>
                    <span class="sg-level-val required">{{ gap.required_level|floatformat:1 }}</span>
                </div>
                <div class="sg-level-item">
                    <span class="sg-level-label">Gap</span>
                    <span class="sg-level-val gap-val">{{ gap.gap_value|floatformat:1 }}</span>
                </div>
            </div>
            <div class="sg-progress">
                <div class="sg-progress-fill {% if gap.current_level >= 3 %}med-fill{% else %}low-fill{% endif %}" style="width:{% widthratio gap.current_level 10 100 %}%"></div>
                <div class="sg-required-marker" style="left:{% widthratio gap.required_level 10 100 %}%"></div>
            </div>
            <div class="sg-gap-actions">
                {% if gap.related_job %}
                <a href="{% url 'assessments:start_assessment_from_job' gap.related_job.id gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% else %}
                <a href="{% url 'assessments:start_assessment_direct' gap.skill.id %}" class="sg-action-btn primary">
                    <i class='bx bx-play-circle'></i> Take Assessment
                </a>
                {% endif %}
                <a href="{% url 'learning:course_catalog' %}?skill={{ gap.skill.id }}" class="sg-action-btn outline">
                    <i class='bx bx-book'></i> Find Courses
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- ═══ Matched Skills ═══ -->
{% if matched_skills %}
<div class="sg-section">
    <div class="sg-section-header matched">
        <h3><i class='bx bx-check-circle'></i> Skills You Meet</h3>
        <span class="sg-count-badge matched">{{ matched_skills|length }}</span>
    </div>
    <div class="sg-gap-grid">
        {% for skill in matched_skills %}
        <div class="sg-matched-card">
            <div class="sg-matched-icon"><i class='bx bx-check'></i></div>
            <div class="sg-matched-info">
                <h4>{{ skill.skill.name }}</h4>
                <span>{{ skill.skill.category.name }} &middot; Required: {{ skill.required_level|floatformat:1 }}</span>
            </div>
            <span class="sg-matched-level">{{ skill.current_level|floatformat:1 }}/10</span>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- ═══ No Gaps State ═══ -->
{% if not skill_gaps and not matched_skills %}
<div class="sg-empty">
    <i class='bx bx-check-circle'></i>
    <h3>No Skill Data Available</h3>
    <p>This job doesn't have specific skill requirements defined yet. Browse other jobs to find skill gap analyses.</p>
    <a href="{% url 'jobs:job_listings' %}" class="sg-action-btn primary" style="padding:.55rem 1.15rem; font-size:.9rem;">
        <i class='bx bx-search'></i> Browse Jobs
    </a>
</div>
{% elif not skill_gaps %}
<div class="sg-empty" style="background:linear-gradient(135deg,rgba(34,197,94,.04),rgba(34,197,94,.12));">
    <i class='bx bx-trophy'></i>
    <h3>You meet all skill requirements!</h3>
    <p>Your skills match everything this job needs. Consider applying now.</p>
    <a href="{% url 'jobs:job_detail' job.id %}" class="sg-action-btn primary" style="padding:.55rem 1.15rem; font-size:.9rem;">
        <i class='bx bx-right-arrow-alt'></i> View Job &amp; Apply
    </a>
</div>
{% endif %}

{% endblock %}
